# Code Agent - AI é©±åŠ¨çš„ä»£ç åˆ†æä¸æµ‹è¯•å·¥å…·

[English](README.md) | [ç®€ä½“ä¸­æ–‡](README.zh-CN.md)

ä¸€ä¸ªç”± Google Gemini AI é©±åŠ¨çš„æ™ºèƒ½ä»£ç åˆ†æå’Œæµ‹è¯•ä»£ç†ã€‚æ­¤å·¥å…·å¯ä»¥åˆ†æä»£ç åº“ã€å®ç°åŠŸèƒ½ã€ç”Ÿæˆå•å…ƒæµ‹è¯•ï¼Œå¹¶è‡ªåŠ¨éªŒè¯æ›´æ”¹ã€‚

> **âš ï¸ é‡è¦æç¤º**  
> **æœ¬åº”ç”¨éœ€è¦ç½‘ç»œè®¿é—® Google Gemini API æ‰èƒ½æ­£å¸¸è¿è¡Œ**ã€‚è¯·ç¡®ä¿æ‚¨çš„ç¯å¢ƒæ»¡è¶³ï¼š
> - æœ‰æ•ˆçš„äº’è”ç½‘è¿æ¥
> - å¯ä»¥è®¿é—® Google AI æœåŠ¡ (api.google.com)
> - å·²é…ç½®æœ‰æ•ˆçš„ Gemini API å¯†é’¥
> - é˜²ç«å¢™æœªé˜»æ­¢ Google API ç«¯ç‚¹

## ğŸŒŸ åŠŸèƒ½ç‰¹æ€§

- **ğŸ“Š æ™ºèƒ½ä»£ç åˆ†æ**ï¼šåˆ†æé¡¹ç›®ç»“æ„å¹¶è¯†åˆ«å…³é”®æ–‡ä»¶
- **ğŸ”§ è‡ªåŠ¨åŒ–ä»£ç ä¿®æ”¹**ï¼šä½¿ç”¨ AI ä¸¤æ­¥æµç¨‹å®ç°åŠŸèƒ½
- **ğŸ§ª æ™ºèƒ½æµ‹è¯•ç”Ÿæˆ**ï¼šåŸºäºä»£ç å˜æ›´è‡ªåŠ¨ç”Ÿæˆå•å…ƒæµ‹è¯•
- **âœ… æµ‹è¯•æ¡†æ¶æ¨è**ï¼šä¸ºæ‚¨çš„é¡¹ç›®æ¨èæœ€ä½³æµ‹è¯•æ¡†æ¶
- **ğŸ”„ è‡ªåŠ¨åŒ–æµ‹è¯•**ï¼šè‡ªåŠ¨å®‰è£…ä¾èµ–å¹¶è¿è¡Œæµ‹è¯•ï¼Œç”ŸæˆæŠ¥å‘Š
- **ğŸ³ Docker æ”¯æŒ**ï¼šå®Œå…¨å®¹å™¨åŒ–ï¼Œé¢„é…ç½®å¼€å‘ç¯å¢ƒ
- **ğŸŒ Web ç•Œé¢**ï¼šç”¨æˆ·å‹å¥½çš„ä»£ç åˆ†æå’Œæµ‹è¯•å·¥ä½œæµç•Œé¢

## ğŸ“‹ ç›®å½•

- [æ¶æ„](#æ¶æ„)
- [é€»è¾‘æµç¨‹](#é€»è¾‘æµç¨‹)
- [å‰ç½®è¦æ±‚](#å‰ç½®è¦æ±‚)
- [æœ¬åœ°éƒ¨ç½²](#æœ¬åœ°éƒ¨ç½²)
- [Docker éƒ¨ç½²](#docker-éƒ¨ç½²)
- [ä½¿ç”¨æŒ‡å—](#ä½¿ç”¨æŒ‡å—)
- [é…ç½®è¯´æ˜](#é…ç½®è¯´æ˜)
- [API æ¥å£](#api-æ¥å£)

---

## ğŸ—ï¸ æ¶æ„

### ç³»ç»Ÿç»„ä»¶

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Web ç•Œé¢ (HTML/JS)                       â”‚
â”‚                     http://localhost:8000                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    FastAPI åç«¯ (main.py)                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  /api/analyze        - åˆ†æä»£ç åº“                    â”‚   â”‚
â”‚  â”‚  /api/run-and-test   - è¿è¡Œå®ç°å·¥ä½œæµ                â”‚   â”‚
â”‚  â”‚  /api/cleanup        - æ¸…ç†ä¸´æ—¶æ–‡ä»¶                  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    æ ¸å¿ƒåˆ†æä»£ç†                              â”‚
â”‚                      (agent.py)                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  â€¢ é¡¹ç›®ç»“æ„åˆ†æ                                      â”‚   â”‚
â”‚  â”‚  â€¢ å…³é”®æ–‡ä»¶è¯†åˆ«                                      â”‚   â”‚
â”‚  â”‚  â€¢ åŠŸèƒ½ä½ç½®æ˜ å°„                                      â”‚   â”‚
â”‚  â”‚  â€¢ æ‰§è¡Œè®¡åˆ’ç”Ÿæˆ                                      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               LangGraph å·¥ä½œæµ (workflow.py)                 â”‚
â”‚                                                              â”‚
â”‚    æ­¥éª¤ 1: ç”Ÿæˆæµ‹è¯•å‘½ä»¤                                      â”‚
â”‚         â†“                                                    â”‚
â”‚    æ­¥éª¤ 2: ä¿®æ”¹ä»£ç ï¼ˆä¸¤æ­¥ AI æµç¨‹ï¼‰                          â”‚
â”‚         â†“                                                    â”‚
â”‚    æ­¥éª¤ 3: ç”Ÿæˆå•å…ƒæµ‹è¯•                                      â”‚
â”‚         â†“                                                    â”‚
â”‚    æ­¥éª¤ 4: è¿è¡Œæµ‹è¯•å¹¶éªŒè¯                                    â”‚
â”‚         â†“                                                    â”‚
â”‚    â† é‡è¯•å¾ªç¯ï¼ˆæµ‹è¯•å¤±è´¥æ—¶æœ€å¤šé‡è¯• 3 æ¬¡ï¼‰                     â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    AI é©±åŠ¨å·¥å…·é›†                             â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ generate_test_      â”‚  â”‚  code_modifier.py          â”‚   â”‚
â”‚  â”‚ commands.py         â”‚  â”‚  â€¢ è¯†åˆ«éœ€è¦ä¿®æ”¹çš„æ–‡ä»¶      â”‚   â”‚
â”‚  â”‚ â€¢ æ¨èæµ‹è¯•æ¡†æ¶      â”‚  â”‚  â€¢ ç”Ÿæˆæ–°å†…å®¹              â”‚   â”‚
â”‚  â”‚ â€¢ ç”Ÿæˆå®‰è£…å‘½ä»¤      â”‚  â”‚  â€¢ å†™å…¥ç£ç›˜                â”‚   â”‚
â”‚  â”‚ â€¢ ç”Ÿæˆæ‰§è¡Œå‘½ä»¤      â”‚  â”‚  â€¢ åˆ›å»ºå¤‡ä»½                â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ generate_unittest.  â”‚  â”‚  run_unittest.py           â”‚   â”‚
â”‚  â”‚ py                  â”‚  â”‚  â€¢ å®‰è£…ä¾èµ–                â”‚   â”‚
â”‚  â”‚ â€¢ ç”Ÿæˆæµ‹è¯•ä»£ç       â”‚  â”‚  â€¢ æŒ‰æ–‡ä»¶è¿è¡Œæµ‹è¯•          â”‚   â”‚
â”‚  â”‚ â€¢ æ¡†æ¶æ„ŸçŸ¥          â”‚  â”‚  â€¢ è§£æç»“æœ                â”‚   â”‚
â”‚  â”‚ â€¢ ä¿å­˜åˆ°ç£ç›˜        â”‚  â”‚  â€¢ æ±‡æ€»ç»Ÿè®¡                â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Gemini CLI é›†æˆ                             â”‚
â”‚                                                              â”‚
â”‚  â€¢ æ¨¡å‹ï¼šé€šè¿‡ GEMINI_MODEL ç¯å¢ƒå˜é‡é…ç½®                     â”‚
â”‚  â€¢ é»˜è®¤ï¼šgemini-2.5-flash                                   â”‚
â”‚  â€¢ æ–‡ä»¶é‡å®šå‘é¿å…æˆªæ–­                                        â”‚
â”‚  â€¢ è¶…æ—¶ä¿æŠ¤ï¼ˆ120s - 1200sï¼‰                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æŠ€æœ¯æ ˆ

| ç»„ä»¶ | æŠ€æœ¯ |
|------|------|
| **åç«¯** | FastAPI (Python 3.11+) |
| **AI é›†æˆ** | Google Gemini CLI |
| **å·¥ä½œæµ** | LangGraph |
| **å‰ç«¯** | HTML/JavaScript |
| **ç‰ˆæœ¬æ§åˆ¶** | Gitï¼ˆç”¨äºå˜æ›´è·Ÿè¸ªï¼‰ |
| **æµ‹è¯•æ¡†æ¶** | pytest, jest, vitest, mochaï¼ˆè‡ªåŠ¨æ£€æµ‹ï¼‰ |
| **å®¹å™¨åŒ–** | Docker + Docker Compose |

---

## ğŸ”„ é€»è¾‘æµç¨‹

### 1. ä»£ç åˆ†ææµç¨‹

```mermaid
graph TD
    A[ä¸Šä¼  ZIP/ä»£ç ] --> B[è§£å‹åˆ°ä¸´æ—¶ç›®å½•]
    B --> C[è·å–é¡¹ç›®ç»“æ„]
    C --> D[ä½¿ç”¨ AI è¯†åˆ«å…³é”®æ–‡ä»¶]
    D --> E[åˆ†æåŠŸèƒ½å¹¶ç”Ÿæˆæ‰§è¡Œè®¡åˆ’]
    E --> F[è¿”å›åˆ†ææŠ¥å‘Š]
```

**æ­¥éª¤è¯´æ˜ï¼š**
1. **ä¸Šä¼ **ï¼šç”¨æˆ·ä¸Šä¼ ä»£ç  ZIP æ–‡ä»¶æˆ–æä¾›ç›®å½•
2. **è§£å‹**ï¼šä»£ç è§£å‹åˆ°ä¸´æ—¶ç›®å½•
3. **ç»“æ„åˆ†æ**ï¼šæ„å»ºé¡¹ç›®æ ‘ç»“æ„
4. **å…³é”®æ–‡ä»¶è¯†åˆ«**ï¼šAI è¯†åˆ«ç›¸å…³æ–‡ä»¶ï¼ˆAPI è·¯ç”±ã€æœåŠ¡ã€æ¨¡å‹ï¼‰
5. **åŠŸèƒ½åˆ†æ**ï¼šAI å®šä½åŠŸèƒ½å®ç°ä½ç½®
6. **æ‰§è¡Œè®¡åˆ’**ï¼šAI ç”Ÿæˆé€æ­¥å®ç°æŒ‡å—

### 2. å®ç°ä¸æµ‹è¯•å·¥ä½œæµ

```mermaid
graph TD
    A[åˆ†ææŠ¥å‘Š] --> B[éå†æ¯ä¸ªåŠŸèƒ½]
    B --> C[æ­¥éª¤ 1: ç”Ÿæˆæµ‹è¯•å‘½ä»¤]
    C --> D[æ­¥éª¤ 2: ä¿®æ”¹ä»£ç ]
    D --> D1[AI è¯†åˆ«éœ€è¦ä¿®æ”¹çš„æ–‡ä»¶]
    D1 --> D2[AI ä¸ºæ¯ä¸ªæ–‡ä»¶ç”Ÿæˆæ–°å†…å®¹]
    D2 --> D3[å†™å…¥å˜æ›´å¹¶ git æäº¤]
    D3 --> E[æ­¥éª¤ 3: ç”Ÿæˆå•å…ƒæµ‹è¯•]
    E --> F[æ­¥éª¤ 4: è¿è¡Œæµ‹è¯•]
    F --> G{æµ‹è¯•é€šè¿‡?}
    G -->|æ˜¯| H[ä¸‹ä¸€ä¸ªåŠŸèƒ½]
    G -->|å¦| I{é‡è¯• < 3 æ¬¡?}
    I -->|æ˜¯| D
    I -->|å¦| J[æ ‡è®°ä¸ºå¤±è´¥]
    H --> K{è¿˜æœ‰æ›´å¤šåŠŸèƒ½?}
    K -->|æ˜¯| B
    K -->|å¦| L[å®Œæˆ]
```

**è¯¦ç»†æ­¥éª¤ï¼š**

#### æ­¥éª¤ 1: ç”Ÿæˆæµ‹è¯•å‘½ä»¤
- **è¾“å…¥**ï¼šåŠŸèƒ½æè¿°ã€ä»£ç åº“
- **å¤„ç†**ï¼š
  - AI åˆ†æé¡¹ç›®å¹¶æ¨èæµ‹è¯•æ¡†æ¶
  - ç”Ÿæˆä¾èµ–å®‰è£…å‘½ä»¤
  - åˆ›å»ºæµ‹è¯•æ‰§è¡Œå‘½ä»¤
- **è¾“å‡º**ï¼šæ¡†æ¶æ¨èã€å®‰è£…å’Œè¿è¡Œå‘½ä»¤

#### æ­¥éª¤ 2: ä¿®æ”¹ä»£ç ï¼ˆä¸¤æ­¥ AI æµç¨‹ï¼‰
1. **è¯†åˆ«é˜¶æ®µ**ï¼š
   - AI æ¥æ”¶ï¼šéœ€æ±‚ + æ‰€æœ‰æ–‡ä»¶ä¸Šä¸‹æ–‡
   - AI è¿”å›ï¼šéœ€è¦ä¿®æ”¹çš„æ–‡ä»¶åˆ—è¡¨
   
2. **ç”Ÿæˆé˜¶æ®µ**ï¼ˆé’ˆå¯¹æ¯ä¸ªæ–‡ä»¶ï¼‰ï¼š
   - AI æ¥æ”¶ï¼šéœ€æ±‚ + å•ä¸ªæ–‡ä»¶å†…å®¹
   - AI è¿”å›ï¼šå®Œæ•´çš„æ›´æ–°æ–‡ä»¶å†…å®¹
   
3. **åº”ç”¨é˜¶æ®µ**ï¼š
   - å†™å…¥å˜æ›´å¹¶åˆ›å»ºå¤‡ä»½
   - Git æäº¤ä»¥è·Ÿè¸ªå˜æ›´
   - ç”Ÿæˆ git diff

#### æ­¥éª¤ 3: ç”Ÿæˆå•å…ƒæµ‹è¯•
- **è¾“å…¥**ï¼šåŠŸèƒ½æè¿°ã€ä»£ç å˜æ›´çš„ git diffã€æ¡†æ¶ä¿¡æ¯
- **å¤„ç†**ï¼š
  - AI ä» git diff åˆ†æå˜æ›´
  - ä¸ºä¿®æ”¹çš„åŠŸèƒ½ç”Ÿæˆå…¨é¢çš„æµ‹è¯•
  - éµå¾ªæ¡†æ¶ç‰¹å®šçš„æœ€ä½³å®è·µ
  - å°†æµ‹è¯•æ–‡ä»¶ä¿å­˜åˆ°ç£ç›˜
- **è¾“å‡º**ï¼šæµ‹è¯•ä»£ç æ–‡ä»¶

#### æ­¥éª¤ 4: è¿è¡Œæµ‹è¯•
- **è¾“å…¥**ï¼šæµ‹è¯•æ–‡ä»¶ã€å®‰è£…å‘½ä»¤
- **å¤„ç†**ï¼š
  - å®‰è£…ä¾èµ–ï¼ˆnpm installã€pip install ç­‰ï¼‰
  - å®‰è£…æµ‹è¯•æ¡†æ¶
  - å•ç‹¬è¿è¡Œæ¯ä¸ªæµ‹è¯•æ–‡ä»¶
  - æ•è·å¹¶è§£æè¾“å‡º
- **è¾“å‡º**ï¼šæµ‹è¯•ç»“æœã€é€šè¿‡/å¤±è´¥çŠ¶æ€

#### é‡è¯•æœºåˆ¶
- **è§¦å‘æ¡ä»¶**ï¼šæµ‹è¯•å¤±è´¥
- **æœ€å¤§é‡è¯•æ¬¡æ•°**ï¼šæ¯ä¸ªåŠŸèƒ½ 3 æ¬¡
- **é‡è¯•æ—¶**ï¼š
  - é”™è¯¯ä¸Šä¸‹æ–‡ä¼ å› AI
  - å°è¯•ä¿®å¤ä»£ç 
  - å¦‚éœ€è¦ç”Ÿæˆæ–°æµ‹è¯•
  - å†æ¬¡è¿è¡Œæµ‹è¯•

### 3. Git é›†æˆæµç¨‹

```
åˆå§‹çŠ¶æ€
    â†“
git init
    â†“
git add . && git commit -m "åˆå§‹çŠ¶æ€"
    â†“
AI ä¿®æ”¹ä»£ç 
    â†“
git diff > changes.diff
    â†“
å°† diff ä¼ é€’ç»™æµ‹è¯•ç”Ÿæˆ
    â†“
æµ‹è¯•éªŒè¯å˜æ›´
```

**ä¼˜åŠ¿ï¼š**
- é€šè¿‡ git diff ç²¾ç¡®è·Ÿè¸ªå˜æ›´
- éœ€è¦æ—¶æ˜“äºå›æ»š
- æ¸…æ™°çš„å®¡è®¡è·Ÿè¸ª
- åŸºäºå®é™…å˜æ›´ç”Ÿæˆæµ‹è¯•

---

## ğŸ“¦ å‰ç½®è¦æ±‚

### æœ¬åœ°å¼€å‘

- **Python**ï¼š3.11 æˆ–æ›´é«˜ç‰ˆæœ¬
- **Node.js**ï¼š20.x æˆ–æ›´é«˜ç‰ˆæœ¬ï¼ˆç”¨äº JS/TS æµ‹è¯•æ”¯æŒï¼‰
- **Gemini CLI**ï¼šGoogle çš„ Gemini å‘½ä»¤è¡Œå·¥å…·
- **Git**ï¼šç”¨äºå·¥ä½œæµä¸­çš„ç‰ˆæœ¬æ§åˆ¶
- **Gemini API Key**ï¼šä» [Google AI Studio](https://makersuite.google.com/app/apikey) è·å–

### Docker éƒ¨ç½²

- **Docker**ï¼š20.10 æˆ–æ›´é«˜ç‰ˆæœ¬
- **Docker Compose**ï¼š1.29 æˆ–æ›´é«˜ç‰ˆæœ¬
- **Gemini API Key**ï¼šä» [Google AI Studio](https://makersuite.google.com/app/apikey) è·å–

---

## ğŸš€ æœ¬åœ°éƒ¨ç½²

### 1. å…‹éš†ä»“åº“

```bash
git clone <your-repo-url>
cd code-agent
```

### 2. å®‰è£… Python ä¾èµ–

```bash
# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒï¼ˆæ¨èï¼‰
python -m venv venv
source venv/bin/activate  # Windows: venv\Scripts\activate

# å®‰è£…ä¾èµ–
pip install -r requirements.txt
```

### 3. å®‰è£… Gemini CLI

```bash
# å…¨å±€å®‰è£…
npm install -g @google/gemini-cli

# éªŒè¯å®‰è£…
gemini --version
```

### 4. å®‰è£… Node.jsï¼ˆç”¨äº JS/TS æµ‹è¯•æ”¯æŒï¼‰

```bash
# macOSï¼ˆä½¿ç”¨ Homebrewï¼‰
brew install node@20

# Ubuntu/Debian
curl -fsSL https://deb.nodesource.com/setup_20.x | sudo -E bash -
sudo apt-get install -y nodejs

# Windows
# ä» https://nodejs.org/ ä¸‹è½½
```

### 5. é…ç½®ç¯å¢ƒå˜é‡

```bash
# å¤åˆ¶ç¤ºä¾‹ç¯å¢ƒæ–‡ä»¶
cp env.example .env

# ç¼–è¾‘ .env å¹¶æ·»åŠ é…ç½®
nano .env
```

**.env æ–‡ä»¶ï¼š**
```bash
# å¿…éœ€
GEMINI_API_KEY=your_gemini_api_key_here

# å¯é€‰ï¼ˆæœ‰é»˜è®¤å€¼ï¼‰
GEMINI_MODEL=gemini-2.5-flash
HOST=0.0.0.0
PORT=8000
LOG_LEVEL=INFO
```

### 6. è¿è¡Œåº”ç”¨

```bash
# å¯åŠ¨æœåŠ¡å™¨
uvicorn main:app --host 0.0.0.0 --port 8000 --reload

# æˆ–ä½¿ç”¨ Python ç›´æ¥è¿è¡Œ
python -c "import uvicorn; uvicorn.run('main:app', host='0.0.0.0', port=8000, reload=True)"
```

### 7. è®¿é—®åº”ç”¨

åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ï¼š
```
http://localhost:8000
```

---

## ğŸ³ Docker éƒ¨ç½²

> **ğŸ“¡ ç½‘ç»œè¦æ±‚**ï¼šç¡®ä¿æ‚¨çš„ Docker å®¹å™¨å…·æœ‰äº’è”ç½‘è®¿é—®æƒé™ä»¥è®¿é—® Google Gemini API ç«¯ç‚¹ã€‚

### å¿«é€Ÿå¼€å§‹

```bash
# 1. åˆ›å»º .env æ–‡ä»¶
cp env.example .env

# 2. æ·»åŠ  Gemini API key åˆ° .env
echo "GEMINI_API_KEY=your_key_here" >> .env

# 3. æ„å»ºå¹¶è¿è¡Œ
docker-compose up -d

# 4. æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f

# 5. è®¿é—®åº”ç”¨
# http://localhost:8000
```

### è¯¦ç»† Docker å‘½ä»¤

#### æ„å»ºé•œåƒ

```bash
docker build -t code-agent:latest .
```

#### ä½¿ç”¨ Docker Compose è¿è¡Œ

```bash
# åå°å¯åŠ¨
docker-compose up -d

# å¸¦æ—¥å¿—å¯åŠ¨
docker-compose up

# åœæ­¢
docker-compose down

# é‡æ–°æ„å»ºå¹¶å¯åŠ¨
docker-compose up -d --build
```

#### ä½¿ç”¨ Docker CLI è¿è¡Œ

```bash
docker run -d \
  --name code-agent \
  -p 8000:8000 \
  -e GEMINI_API_KEY=your_api_key \
  -e GEMINI_MODEL=gemini-2.5-flash \
  -v $(pwd)/temp:/app/temp \
  code-agent:latest
```

#### å¸¸ç”¨ Docker å‘½ä»¤

```bash
# æŸ¥çœ‹æ—¥å¿—
docker logs -f code-agent

# åœ¨å®¹å™¨å†…æ‰§è¡Œå‘½ä»¤
docker exec -it code-agent bash

# æµ‹è¯• gemini-cli
docker exec code-agent gemini --version

# æ£€æŸ¥ç¯å¢ƒå˜é‡
docker exec code-agent env | grep GEMINI
```

### Docker ç¯å¢ƒå˜é‡

åœ¨ `docker-compose.yml` æˆ– `.env` ä¸­é…ç½®ï¼š

```yaml
environment:
  - GEMINI_API_KEY=${GEMINI_API_KEY}
  - GEMINI_MODEL=${GEMINI_MODEL:-gemini-2.5-flash}
  - PYTHONUNBUFFERED=1
```

---

## ğŸ’» ä½¿ç”¨æŒ‡å—

### Web ç•Œé¢

1. **è®¿é—®** `http://localhost:8000`
2. **ä¸Šä¼ ** ä»£ç  ZIP æ–‡ä»¶
3. **è¾“å…¥** åŠŸèƒ½æè¿°
4. **ç‚¹å‡»"åˆ†æä»£ç "** æ¥åˆ†æä»£ç åº“
5. **æŸ¥çœ‹** åˆ†ææŠ¥å‘Š
6. **ç‚¹å‡»"è¿è¡Œå®ç°"** æ‰§è¡Œå·¥ä½œæµ
7. **ç›‘æ§** è¿›åº¦å’Œæµ‹è¯•ç»“æœ

### API ä½¿ç”¨

#### 1. åˆ†æä»£ç 

```bash
curl -X POST http://localhost:8000/api/analyze \
  -F "file=@your-code.zip" \
  -F "problem_description=å®ç°ç”¨æˆ·è®¤è¯åŠŸèƒ½"
```

**å“åº”ï¼š**
```json
{
  "project_structure": "...",
  "feature_analysis": [...],
  "execution_plan_suggestion": "...",
  "codebase_path": "/app/temp/tmp_xxxxx"
}
```

#### 2. è¿è¡Œå®ç°ä¸æµ‹è¯•

```bash
curl -X POST http://localhost:8000/api/run-and-test \
  -H "Content-Type: application/json" \
  -d '{
    "analysis_report": {...},
    "base_directory": "/app/temp/tmp_xxxxx"
  }'
```

#### 3. æ¸…ç†ä¸´æ—¶æ–‡ä»¶

```bash
curl -X POST http://localhost:8000/api/cleanup \
  -H "Content-Type: application/json" \
  -d '{"path": "/app/temp/tmp_xxxxx"}'
```

---

## âš™ï¸ é…ç½®è¯´æ˜

### ç¯å¢ƒå˜é‡

| å˜é‡å | è¯´æ˜ | å¿…éœ€ | é»˜è®¤å€¼ |
|--------|------|------|--------|
| `GEMINI_API_KEY` | Gemini API å¯†é’¥ | âœ… æ˜¯ | - |
| `GEMINI_MODEL` | ä½¿ç”¨çš„ Gemini æ¨¡å‹ | å¦ | `gemini-2.5-flash` |
| `HOST` | æœåŠ¡å™¨ä¸»æœº | å¦ | `0.0.0.0` |
| `PORT` | æœåŠ¡å™¨ç«¯å£ | å¦ | `8000` |
| `LOG_LEVEL` | æ—¥å¿—çº§åˆ« | å¦ | `INFO` |

### å¯ç”¨çš„ Gemini æ¨¡å‹

- `gemini-2.5-flash` - å¿«é€Ÿã€ç»æµé«˜æ•ˆï¼ˆæ¨èï¼‰
- `gemini-1.5-pro` - æ›´å¼ºå¤§ã€è¾ƒæ…¢
- `gemini-1.5-flash` - å¹³è¡¡æ€§èƒ½

### åˆ‡æ¢æ¨¡å‹

```bash
# åœ¨ .env æ–‡ä»¶ä¸­
GEMINI_MODEL=gemini-1.5-pro

# æˆ–ä½œä¸ºç¯å¢ƒå˜é‡
export GEMINI_MODEL=gemini-1.5-pro
uvicorn main:app
```

---

## ğŸ”Œ API æ¥å£

### POST `/api/analyze`

åˆ†æä»£ç åº“å¹¶è¯†åˆ«åŠŸèƒ½ä½ç½®ã€‚

**è¯·æ±‚ï¼š**
- `file`ï¼šZIP æ–‡ä»¶ï¼ˆmultipart/form-dataï¼‰
- `problem_description`ï¼šåŠŸèƒ½éœ€æ±‚ï¼ˆæ–‡æœ¬ï¼‰

**å“åº”ï¼š**
```json
{
  "project_structure": "string",
  "feature_analysis": [
    {
      "feature_description": "string",
      "implementation_location": [...]
    }
  ],
  "execution_plan_suggestion": "string",
  "codebase_path": "string"
}
```

### POST `/api/run-and-test`

æ‰§è¡Œå®ç°å·¥ä½œæµå¹¶æµ‹è¯•ã€‚

**è¯·æ±‚ï¼š**
```json
{
  "analysis_report": {...},
  "base_directory": "/path/to/code"
}
```

**å“åº”ï¼š**
```json
{
  "results": [
    {
      "feature": "...",
      "success": true,
      "test_results": {...}
    }
  ]
}
```

### POST `/api/cleanup`

æ¸…ç†ä¸´æ—¶ç›®å½•ã€‚

**è¯·æ±‚ï¼š**
```json
{
  "path": "/path/to/temp/dir"
}
```

### GET `/health`

å¥åº·æ£€æŸ¥æ¥å£ã€‚

**å“åº”ï¼š**
```json
{
  "status": "healthy"
}
```

---

## ğŸ§ª æµ‹è¯•æ”¯æŒ

### æ”¯æŒçš„æ¡†æ¶

- **Python**ï¼špytestã€unittest
- **JavaScript/TypeScript**ï¼šjestã€vitestã€mocha
- **Java**ï¼šjunit
- **Go**ï¼šgo test
- **PHP**ï¼šphpunit
- **Ruby**ï¼šrspec

### è‡ªåŠ¨æ£€æµ‹

ç³»ç»Ÿè‡ªåŠ¨ï¼š
1. ä¸ºæ‚¨çš„é¡¹ç›®æ¨èæœ€ä½³æ¡†æ¶
2. å®‰è£…æ‰€éœ€ä¾èµ–
3. ç”Ÿæˆæ¡†æ¶ç‰¹å®šçš„æµ‹è¯•
4. ä½¿ç”¨é€‚å½“çš„å‘½ä»¤è¿è¡Œæµ‹è¯•

---

## ğŸ› ï¸ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

**1. æ‰¾ä¸åˆ° Gemini CLI**
```bash
# å…¨å±€å®‰è£…
npm install -g @google/gemini-cli

# éªŒè¯
which gemini
```

**2. API Key æœªè®¾ç½®**
```bash
# æ£€æŸ¥ .env æ–‡ä»¶
cat .env | grep GEMINI_API_KEY

# æ‰‹åŠ¨è®¾ç½®
export GEMINI_API_KEY=your_key
```

**3. ç«¯å£å·²è¢«å ç”¨**
```bash
# æ£€æŸ¥ç«¯å£ 8000 çš„ä½¿ç”¨æƒ…å†µ
lsof -i :8000

# ä½¿ç”¨ä¸åŒç«¯å£
PORT=8001 uvicorn main:app
```

**4. Docker å®¹å™¨æ— æ³•å¯åŠ¨**
```bash
# æŸ¥çœ‹æ—¥å¿—
docker-compose logs code-agent

# é‡æ–°æ„å»º
docker-compose down
docker-compose up --build
```

**5. ç½‘ç»œ/API è¿æ¥é—®é¢˜**
```bash
# ä»å®¹å™¨æµ‹è¯•ç½‘ç»œè¿æ¥
docker exec code-agent ping -c 3 google.com

# æµ‹è¯• Gemini CLI
docker exec code-agent gemini -p "test" --output-format json

# æ£€æŸ¥ API key æ˜¯å¦è®¾ç½®
docker exec code-agent env | grep GEMINI_API_KEY

# éªŒè¯é˜²ç«å¢™æ˜¯å¦å…è®¸å‡ºç«™ HTTPS
curl -I https://generativelanguage.googleapis.com
```

---

## ğŸ“ ç¤ºä¾‹å·¥ä½œæµ

```bash
# 1. å¯åŠ¨åº”ç”¨
docker-compose up -d

# 2. é€šè¿‡ Web ç•Œé¢ä¸Šä¼ ä»£ç 
# è®¿é—® http://localhost:8000

# 3. è¾“å…¥åŠŸèƒ½æè¿°ï¼š
# "æ·»åŠ  JWT ä»¤ç‰Œçš„ç”¨æˆ·è®¤è¯"

# 4. ç‚¹å‡»"åˆ†æä»£ç "
# ç³»ç»Ÿåˆ†æå¹¶è¯†åˆ«ç›¸å…³æ–‡ä»¶

# 5. ç‚¹å‡»"è¿è¡Œå®ç°"
# è§‚å¯Ÿç³»ç»Ÿï¼š
#   - æ¨èæµ‹è¯•æ¡†æ¶
#   - ä¿®æ”¹ä»£ç æ–‡ä»¶
#   - ç”Ÿæˆå•å…ƒæµ‹è¯•
#   - è¿è¡Œæµ‹è¯•
#   - æŠ¥å‘Šç»“æœ

# 6. æŸ¥çœ‹ç»“æœ
# æŸ¥çœ‹ä¿®æ”¹çš„æ–‡ä»¶ã€ç”Ÿæˆçš„æµ‹è¯•å’Œç»“æœ
```

---

## ğŸ“š å…¶ä»–æ–‡æ¡£

- [Docker éƒ¨ç½²æŒ‡å—](DOCKER.md)
- [æ¶æ„æ·±å…¥è§£æ](docs/architecture.md) *ï¼ˆå¦‚æœå­˜åœ¨ï¼‰*
- [API å‚è€ƒ](docs/api.md) *ï¼ˆå¦‚æœå­˜åœ¨ï¼‰*

---

## ğŸ¤ è´¡çŒ®

1. Fork ä»“åº“
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯
3. è¿›è¡Œä¿®æ”¹
4. è¿è¡Œæµ‹è¯•
5. æäº¤ Pull Request

---

## ğŸ“„ è®¸å¯è¯

[æ‚¨çš„è®¸å¯è¯]

---

## ğŸ™ è‡´è°¢

- **Google Gemini**ï¼šæ”¯æŒåˆ†æçš„ AI æ¨¡å‹
- **FastAPI**ï¼šWeb æ¡†æ¶
- **LangGraph**ï¼šå·¥ä½œæµç¼–æ’
- **Docker**ï¼šå®¹å™¨åŒ–

---

## ğŸ“ æ”¯æŒ

é‡åˆ°é—®é¢˜æˆ–æœ‰ç–‘é—®ï¼š
- åœ¨ GitHub ä¸Šæäº¤ Issue
- æŸ¥çœ‹[æ•…éšœæ’é™¤éƒ¨åˆ†](#æ•…éšœæ’é™¤)
- å‚è€ƒ [Docker æŒ‡å—](DOCKER.md)

---

**ä½¿ç”¨ Google Gemini AI ç²¾å¿ƒæ‰“é€  â¤ï¸**

